namespace RetroDither.Tests;

public class RetroDitherTests
{
    [Theory]
    [InlineData(
        (byte[])
        [
            0xAA, 0xAA, 0xAA, 0x80, 0x00, 0x2A, 0xAA, 0xAA, 0xAA, 0xAA,
            0x80, 0x00, 0x2A, 0x22, 0xAA, 0xAA, 0xAA, 0xAA, 0xAA, 0xAA,
            0xAA, 0xAA, 0xAA, 0xAA
        ],
        (byte[])
        [
            0xFE, 0xAA, 0x02, 0x80, 0x00, 0x2A, 0xFD, 0xAA, 0x03, 0x80,
            0x00, 0x2A, 0x22, 0xF7, 0xAA
        ])]
    [InlineData(
        (byte[])[0x55, 0x55, 0xBB, 0xBB, 0x55, 0xBB, 0xBB, 0x55],
        (byte[])[0xFF, 0x55, 0xFF, 0xBB, 0x00, 0x55, 0xFF, 0xBB, 0x00, 0x55])]
    [InlineData(
        (byte[])[0x00, 0x01, 0x02, 0x03, 0x04],
        (byte[])[0x04, 0x00, 0x01, 0x02, 0x03, 0x04])]
    [InlineData(
        (byte[])[0x00],
        (byte[])[0x00, 0x00])]
    [InlineData(
        (byte[])[0x11, 0x11, 0x11, 0x11],
        (byte[])[0xFD, 0x11])]
    [InlineData(
        (byte[])[0x11, 0x11, 0x11, 0x11, 0x22, 0x22, 0x22, 0x22],
        (byte[])[0xFD, 0x11, 0xFD, 0x22])]
    public void TestRunLengthEncode(byte[] unpacked, byte[] expected)
    {
        var macPaint = new MacPaint();
        var packed = macPaint.RunLengthEncode(unpacked);

        Assert.Equivalent(expected, packed);
    }
}
